import { useState } from "react";
import { SpeedometerSVG } from "./components/speedometer";
import X from "@/assets/x.png";

export default function Speedometer() {
  const [speed] = useState(200);
  const [seatbelt, setSeatbelt] = useState(false);
  const [isLocked, setIsLocked] = useState(false);
  const [lightsOn, setLightsOn] = useState(false);

  const getGradientColors = (isActive: boolean) => {
    if (isActive) {
      return {
        start: "#E8AD08",
        end: "#431407",
      };
    }
    return {
      start: "rgba(67, 20, 7, 0.2)",
      end: "rgba(67, 20, 7, 0.2)",
    };
  };

  return (
    <div className="min-h-screen bg-black relative text-white p-8 flex flex-col items-center justify-center *:select-none">
      <div className="absolute top-5 left-5 flex flex-col gap-2">
        <button
          onClick={() => setSeatbelt(!seatbelt)}
          className={`px-4 py-2 rounded ${
            seatbelt ? "bg-yellow-600" : "bg-gray-600"
          }`}
        >
          Seatbelt: {seatbelt ? "ON" : "OFF"}
        </button>
        <button
          onClick={() => setIsLocked(!isLocked)}
          className={`px-4 py-2 rounded ${
            isLocked ? "bg-yellow-600" : "bg-gray-600"
          }`}
        >
          Lock: {isLocked ? "ON" : "OFF"}
        </button>
        <button
          onClick={() => setLightsOn(!lightsOn)}
          className={`px-4 py-2 rounded ${
            lightsOn ? "bg-yellow-600" : "bg-gray-600"
          }`}
        >
          Lights: {lightsOn ? "ON" : "OFF"}
        </button>
      </div>

      <div className="absolute right-5 bottom-5 w-[240px] h-[240px]">
        <SpeedometerSVG
          speed={speed}
          width={240}
          height={240}
          trackColor="rgba(67, 20, 7, 0.2)"
        />

        <div className="absolute inset-0 left-7 -top-5 flex items-center justify-center flex-col">
          <img className="absolute" src={X} />
          <div className="w-28 h-28 rounded-full bg-gradient-to-br from-[#FACC15] via-[#FEF08A] to-[#FB923C] blur-md opacity-30"></div>
          <div className="w-28 h-28 rounded-full border border-dashed opacity-20 absolute"></div>
          <div className="w-20 h-20 rounded-full border border-white/10 absolute"></div>

          <div className="absolute text-center top-1/2 flex flex-col space-y-2 -translate-y-1/2 items-center">
            <div className="text-xs text-white/50 mt-1">RPM</div>
            <div className="text-4xl leading-none font-soliden font-normal">
              {speed}
            </div>

            <div className="bg-gradient-to-l text-xs from-transparent via-white/30 to-transparent">
              <span>{" < "}</span>
              <span className="font-soliden">3</span>
              <span>{" > "}</span>
            </div>
          </div>

          <div className="absolute top-[calc(52%+60px)] left-1/2 -translate-x-1/2 text-white text-sm">
            50%
          </div>

          <div className="absolute top-[calc(67%+60px)] left-1/2 -translate-1/2">
            <svg
              width="126"
              height="42"
              viewBox="0 0 126 42"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <defs>
                <linearGradient
                  id="seatbelt_gradient"
                  x1="25.2915"
                  y1="7.12122"
                  x2="14.2915"
                  y2="26.6212"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor={getGradientColors(seatbelt).start} />
                  <stop
                    offset="1"
                    stopColor={getGradientColors(seatbelt).end}
                  />
                </linearGradient>

                <linearGradient
                  id="lock_gradient"
                  x1="63"
                  y1="22"
                  x2="63"
                  y2="35"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor={getGradientColors(isLocked).start} />
                  <stop
                    offset="1"
                    stopColor={getGradientColors(isLocked).end}
                  />
                </linearGradient>

                <linearGradient
                  id="lights_gradient"
                  x1="106"
                  y1="12"
                  x2="106"
                  y2="23"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor={getGradientColors(lightsOn).start} />
                  <stop
                    offset="1"
                    stopColor={getGradientColors(lightsOn).end}
                  />
                </linearGradient>

                <filter
                  id="filter0_d_41_61"
                  x="5.3165"
                  y="4.14622"
                  width="26.95"
                  height="26.95"
                  filterUnits="userSpaceOnUse"
                  colorInterpolationFilters="sRGB"
                >
                  <feFlood floodOpacity="0" result="BackgroundImageFix" />
                  <feColorMatrix
                    in="SourceAlpha"
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                    result="hardAlpha"
                  />
                  <feOffset />
                  <feGaussianBlur stdDeviation="3.2375" />
                  <feComposite in2="hardAlpha" operator="out" />
                  <feColorMatrix
                    type="matrix"
                    values="0 0 0 0 0.980392 0 0 0 0 0.8 0 0 0 0 0.0823529 0 0 0 0.2 0"
                  />
                  <feBlend
                    mode="normal"
                    in2="BackgroundImageFix"
                    result="effect1_dropShadow_41_61"
                  />
                  <feBlend
                    mode="normal"
                    in="SourceGraphic"
                    in2="effect1_dropShadow_41_61"
                    result="shape"
                  />
                </filter>
              </defs>

              <path
                d="M125.582 18.3844C117.135 25.3928 107.498 31.0146 97.0173 34.9031L88.8071 12.3445C96.6315 9.42376 103.833 5.22502 110.155 0L125.582 18.3844Z"
                fill={lightsOn ? "url(#lights_gradient)" : "#431407"}
                fillOpacity={lightsOn ? "1" : "0.2"}
              />
              <path
                d="M125.157 18.3447C116.868 25.1796 107.438 30.6781 97.1948 34.5146L89.1899 12.5195C96.8442 9.62728 103.899 5.51553 110.116 0.418945L125.157 18.3447Z"
                stroke="white"
                strokeOpacity="0.05"
                strokeWidth="0.6"
              />
              <path
                d="M95.8911 35.3134C85.8444 38.9014 75.0445 40.8997 63.7915 41.0117V41.0136H63.6587C63.5699 41.0144 63.481 41.016 63.3921 41.0165V41.0136H61.52C50.3649 40.8723 39.6576 38.8734 29.6919 35.3144L37.9028 12.7548C45.5064 15.4533 53.6789 16.9493 62.1919 17.0165H63.3921C71.9049 16.9493 80.0767 15.4532 87.6802 12.7548L95.8911 35.3134Z"
                fill={isLocked ? "url(#lock_gradient)" : "#431407"}
                fillOpacity={isLocked ? "1" : "0.2"}
              />
              <path
                d="M95.5044 35.1308C85.5697 38.6439 74.9013 40.6012 63.7886 40.7118L63.5903 40.7138H61.5239C50.5085 40.5743 39.9319 38.6166 30.0776 35.1318L38.0835 13.1357C45.6384 15.7828 53.7478 17.2496 62.1899 17.3163H63.394C71.8357 17.2496 79.944 15.7825 87.4985 13.1357L95.5044 35.1308Z"
                stroke="white"
                strokeOpacity="0.05"
                strokeWidth="0.6"
              />

              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M58.854 27.4864V26.2879C58.854 24.1133 60.6169 22.3504 62.7915 22.3504C64.9661 22.3504 66.729 24.1133 66.729 26.2879V27.4864C67.3793 27.535 67.8027 27.6576 68.1123 27.9671C68.6248 28.4797 68.6248 29.3046 68.6248 30.9546C68.6248 32.6045 68.6248 33.4294 68.1123 33.942C67.5997 34.4546 66.7748 34.4546 65.1248 34.4546H60.4582C58.8083 34.4546 57.9833 34.4546 57.4707 33.942C56.9582 33.4294 56.9582 32.6045 56.9582 30.9546C56.9582 29.3046 56.9582 28.4797 57.4707 27.9671C57.7803 27.6576 58.2037 27.535 58.854 27.4864ZM59.729 26.2879C59.729 24.5965 61.1001 23.2254 62.7915 23.2254C64.4829 23.2254 65.854 24.5965 65.854 26.2879V27.4566C65.6306 27.4546 65.3882 27.4546 65.1248 27.4546H60.4582C60.1948 27.4546 59.9524 27.4546 59.729 27.4566V26.2879Z"
                fill="white"
                fillOpacity="0.4"
              />

              <path
                d="M15.4266 0C21.749 5.22507 28.9504 9.42364 36.7746 12.3445L28.5645 34.9031C18.0846 31.0146 8.44654 25.3937 0 18.3855L15.4266 0Z"
                fill="url(#seatbelt_gradient)"
                fillOpacity={seatbelt ? "1" : "0.4"}
              />
              <path
                d="M15.4648 0.418945C21.682 5.51581 28.7373 9.62707 36.3916 12.5195L28.3857 34.5146C18.1433 30.678 8.71268 25.1804 0.423828 18.3457L15.4648 0.418945Z"
                stroke="white"
                strokeOpacity="0.1"
                strokeWidth="0.6"
              />
              <g filter="url(#filter0_d_41_61)">
                <path
                  d="M23.458 14.899V13.149C23.4581 13.1105 23.4467 13.0729 23.4252 13.041C23.4037 13.0091 23.3731 12.9844 23.3374 12.9701C23.302 12.9553 23.263 12.9512 23.2253 12.9585C23.1876 12.9658 23.1528 12.984 23.1255 13.0109L14.181 21.9554C14.1452 21.9925 14.125 22.0419 14.1246 22.0934V23.8434C14.1245 23.8819 14.1359 23.9195 14.1574 23.9514C14.1789 23.9833 14.2095 24.008 14.2452 24.0223C14.2683 24.0332 14.2936 24.0386 14.3191 24.0379C14.3707 24.038 14.4204 24.0178 14.4571 23.9815L23.4016 15.0371C23.4374 15 23.4576 14.9505 23.458 14.899Z"
                  fill={seatbelt ? "#FEFCE8" : "rgba(254, 252, 232, 0.3)"}
                />
                <path
                  d="M18.7915 15.0934C19.8654 15.0934 20.7359 14.2229 20.7359 13.149C20.7359 12.0751 19.8654 11.2046 18.7915 11.2046C17.7176 11.2046 16.847 12.0751 16.847 13.149C16.847 14.2229 17.7176 15.0934 18.7915 15.0934Z"
                  fill={seatbelt ? "#FEFCE8" : "rgba(254, 252, 232, 0.3)"}
                />
                <path
                  d="M14.5137 21.3156C14.5137 21.264 14.4932 21.2146 14.4568 21.1781C14.4203 21.1416 14.3708 21.1212 14.3193 21.1212H13.5415C13.4899 21.1212 13.4405 21.1416 13.404 21.1781C13.3675 21.2146 13.347 21.264 13.347 21.3156V23.8434C13.347 23.8949 13.3675 23.9444 13.404 23.9809C13.4405 24.0173 13.4899 24.0378 13.5415 24.0378C13.5931 24.0378 13.6425 24.0173 13.679 23.9809C13.7154 23.9444 13.7359 23.8949 13.7359 23.8434V21.51H14.3193C14.3708 21.51 14.4203 21.4896 14.4568 21.4531C14.4932 21.4166 14.5137 21.3672 14.5137 21.3156Z"
                  fill={seatbelt ? "#FEFCE8" : "rgba(254, 252, 232, 0.3)"}
                />
                <path
                  d="M24.0413 21.5101H22.8747C22.8231 21.5101 22.7737 21.5305 22.7372 21.567C22.7007 21.6035 22.6802 21.6529 22.6802 21.7045C22.6802 21.7561 22.7007 21.8055 22.7372 21.842C22.7737 21.8785 22.8231 21.8989 22.8747 21.8989H23.8469V23.8434C23.8469 23.895 23.8674 23.9444 23.9039 23.9809C23.9403 24.0173 23.9898 24.0378 24.0413 24.0378C24.0929 24.0378 24.1424 24.0173 24.1788 23.9809C24.2153 23.9444 24.2358 23.895 24.2358 23.8434V21.7045C24.2358 21.6529 24.2153 21.6035 24.1788 21.567C24.1424 21.5305 24.0929 21.5101 24.0413 21.5101Z"
                  fill={seatbelt ? "#FEFCE8" : "rgba(254, 252, 232, 0.3)"}
                />
                <path
                  d="M24.0414 12.1768H22.6803C22.6287 12.1768 22.5793 12.1972 22.5428 12.2337C22.5063 12.2702 22.4858 12.3196 22.4858 12.3712V12.7601C22.4858 12.8117 22.5063 12.8611 22.5428 12.8976C22.5793 12.934 22.6287 12.9545 22.6803 12.9545C22.7319 12.9545 22.7813 12.934 22.8178 12.8976C22.8542 12.8611 22.8747 12.8117 22.8747 12.7601V12.5656H23.847V15.2879H23.4581C23.4065 15.2879 23.357 15.3084 23.3206 15.3448C23.2841 15.3813 23.2636 15.4307 23.2636 15.4823C23.2636 15.5339 23.2841 15.5833 23.3206 15.6198C23.357 15.6563 23.4065 15.6768 23.4581 15.6768H24.0414C24.093 15.6768 24.1424 15.6563 24.1789 15.6198C24.2154 15.5833 24.2358 15.5339 24.2358 15.4823V12.3712C24.2358 12.3196 24.2154 12.2702 24.1789 12.2337C24.1424 12.1972 24.093 12.1768 24.0414 12.1768Z"
                  fill={seatbelt ? "#FEFCE8" : "rgba(254, 252, 232, 0.3)"}
                />
                <path
                  d="M23.2638 22.2879H17.0825C16.9293 22.2879 16.7798 22.335 16.6542 22.4229L15.0619 23.5375C15.0128 23.5719 14.9726 23.6177 14.9449 23.6709C14.9171 23.7242 14.9026 23.7834 14.9026 23.8434C14.9028 23.8949 14.9233 23.9443 14.9598 23.9807C14.9962 24.0172 15.0456 24.0377 15.0971 24.0379H23.2638C23.3153 24.0377 23.3647 24.0172 23.4011 23.9807C23.4375 23.9443 23.4581 23.8949 23.4582 23.8434V22.4823C23.4581 22.4308 23.4375 22.3814 23.4011 22.345C23.3647 22.3085 23.3153 22.288 23.2638 22.2879Z"
                  fill={seatbelt ? "#FEFCE8" : "rgba(254, 252, 232, 0.3)"}
                />
                <path
                  d="M19.5624 16.0257L15.5665 20.0201C15.5121 20.0745 15.4428 20.1115 15.3674 20.1265C15.2919 20.1415 15.2137 20.1338 15.1427 20.1043C15.0716 20.0749 15.0109 20.0251 14.9682 19.9611C14.9255 19.8972 14.9026 19.822 14.9026 19.7451V19.0725C14.9026 17.08 16.4429 15.3774 18.4336 15.2914C18.7471 15.2775 19.061 15.3035 19.368 15.3688C19.4366 15.3835 19.4999 15.4164 19.5514 15.464C19.6028 15.5116 19.6405 15.5722 19.6604 15.6395C19.6803 15.7067 19.6817 15.7781 19.6644 15.8461C19.6472 15.914 19.6119 15.9761 19.5624 16.0257Z"
                  fill={seatbelt ? "#FEFCE8" : "rgba(254, 252, 232, 0.3)"}
                />
                <path
                  d="M22.2914 18.9824V21.5101C22.2911 21.6132 22.25 21.7119 22.1772 21.7848C22.1043 21.8577 22.0056 21.8987 21.9025 21.899H18.0272C17.9503 21.899 17.8751 21.8762 17.8111 21.8335C17.7472 21.7907 17.6973 21.73 17.6679 21.6589C17.6385 21.5878 17.6308 21.5096 17.6458 21.4342C17.6608 21.3588 17.6979 21.2895 17.7523 21.2351L21.4234 17.5655C21.469 17.5195 21.5253 17.4856 21.5873 17.467C21.6492 17.4483 21.7149 17.4454 21.7783 17.4586C21.8417 17.4718 21.9007 17.5006 21.9501 17.5424C21.9995 17.5843 22.0377 17.6378 22.0611 17.6981C22.2138 18.1091 22.2917 18.544 22.2914 18.9824Z"
                  fill={seatbelt ? "#FEFCE8" : "rgba(254, 252, 232, 0.3)"}
                />
              </g>

              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M106.532 12.436C104.384 12.436 102.643 14.2176 102.643 16.4153C102.643 17.5936 103.144 18.6526 103.939 19.3807C104.204 19.6234 104.4 19.8032 104.539 19.9336C104.609 19.9988 104.662 20.0498 104.701 20.0889C104.721 20.1084 104.736 20.1238 104.747 20.1358C104.752 20.1417 104.756 20.1463 104.759 20.1498C104.762 20.1531 104.764 20.1549 104.764 20.1549C104.886 20.3097 104.913 20.3497 104.929 20.3859C104.944 20.4221 104.956 20.469 104.987 20.6657C104.999 20.7434 105 20.8765 105 21.2387L105 21.2543C105 21.4664 105 21.6494 105.014 21.7995C105.028 21.9583 105.059 22.1155 105.142 22.2637C105.235 22.4287 105.369 22.5657 105.531 22.6609C105.675 22.7465 105.829 22.7784 105.984 22.7927C106.131 22.8064 106.31 22.8063 106.517 22.8063H106.547C106.755 22.8063 106.934 22.8064 107.08 22.7927C107.235 22.7784 107.389 22.7465 107.534 22.6609C107.695 22.5657 107.829 22.4287 107.922 22.2637C108.006 22.1155 108.037 21.9583 108.051 21.7995C108.064 21.6494 108.064 21.4664 108.064 21.2543V21.2387C108.064 20.8765 108.065 20.7434 108.078 20.6657C108.109 20.469 108.12 20.4221 108.136 20.3859C108.152 20.3497 108.178 20.3097 108.301 20.1549C108.301 20.1549 108.302 20.1533 108.305 20.1498C108.308 20.1463 108.312 20.1417 108.318 20.1358C108.329 20.1238 108.344 20.1084 108.363 20.0889C108.403 20.0498 108.456 19.9988 108.525 19.9336C108.664 19.8032 108.861 19.6234 109.126 19.3807C109.92 18.6526 110.421 17.5936 110.421 16.4153C110.421 14.2176 108.68 12.436 106.532 12.436ZM107.354 21.6005H105.71C105.712 21.6508 105.714 21.6947 105.718 21.7342C105.727 21.8428 105.744 21.8822 105.755 21.9019C105.786 21.9569 105.83 22.0026 105.884 22.0344C105.903 22.0457 105.942 22.0623 106.048 22.0722C106.159 22.0825 106.305 22.0828 106.532 22.0828C106.759 22.0828 106.905 22.0825 107.016 22.0722C107.123 22.0623 107.161 22.0457 107.18 22.0344C107.234 22.0026 107.279 21.9569 107.31 21.9019C107.321 21.8822 107.337 21.8428 107.347 21.7342C107.35 21.6947 107.353 21.6508 107.354 21.6005ZM107.108 15.6386C107.267 15.7547 107.304 15.9806 107.19 16.1432L106.579 17.0182H107.307C107.439 17.0182 107.56 17.094 107.621 17.2145C107.682 17.3349 107.671 17.48 107.594 17.5903L106.584 19.0373C106.471 19.1999 106.25 19.2375 106.091 19.1214C105.932 19.0053 105.895 18.7793 106.009 18.6167L106.62 17.7417H105.892C105.76 17.7417 105.639 17.666 105.578 17.5455C105.518 17.425 105.528 17.28 105.605 17.1697L106.615 15.7227C106.728 15.5601 106.949 15.5225 107.108 15.6386Z"
                fill="white"
                fillOpacity="0.4"
              />
            </svg>
          </div>
        </div>
      </div>
    </div>
  );
}
